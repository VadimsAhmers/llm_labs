# Эксперименты и оценка системы

## Обзор

Проведено 5 экспериментов для проверки работы мультиагентной системы помощника по учёбе.

---

## Эксперимент 1: Концептуальный вопрос про МАС

**Запрос:**
> Объясни разницу между паттернами supervisor и router в мультиагентных системах

**Активированные агенты:**
- Router Agent → Theory Agent

**Использование инструментов:**
- `search_notes` — попытка найти информацию в базе знаний

**Использование памяти:**
- Запрос добавлен в историю диалога
- Ключевые концепции (supervisor, router, handoff) добавлены в список изученных тем

**Результат:**
✅ Система корректно определила тип запроса как `theory`
✅ Theory Agent предоставил структурированное объяснение с ключевыми концепциями
✅ Указан уровень сложности темы

**Качество ответа:** 8/10
- Объяснение понятное и структурированное
- Можно улучшить: добавить визуальные диаграммы или примеры кода

---

## Эксперимент 2: Вопрос по проектированию

**Запрос:**
> Как спроектировать систему для распределённой обработки данных с микросервисами?

**Активированные агенты:**
- Router Agent → Theory Agent (классифицировано как `architecture`)

**Использование инструментов:**
- `search_notes`

**Использование памяти:**
- История обновлена
- Темы добавлены в профиль

**Результат:**
✅ Маршрутизация сработала (architecture → theory agent)
✅ Предоставлены рекомендации по проектированию

**Качество ответа:** 7/10
- Общие рекомендации полезны
- Можно улучшить: больше конкретики по выбору технологий

---

## Эксперимент 3: Задача на программирование

**Запрос:**
> Напиши функцию для проверки корректности скобочной последовательности с тестами

**Активированные агенты:**
- Router Agent → Code Helper Agent

**Использование инструментов:**
- `execute_code` — код был выполнен для проверки работоспособности

**Использование памяти:**
- Решение сохранено в истории

**Результат:**
✅ Тип запроса определён как `coding`
✅ Сгенерирован рабочий код с тестами
✅ Код успешно выполнен через `execute_code`
✅ Предоставлено объяснение и анализ сложности

**Качество ответа:** 9/10
- Код работает корректно
- Тесты покрывают базовые случаи
- Можно добавить edge cases

---

## Эксперимент 4: Планирование обучения

**Запрос:**
> Составь план подготовки к экзамену по Computer Networks на 3 недели

**Активированные агенты:**
- Router Agent → Planner Agent

**Использование инструментов:**
- `save_plan` — план сохранён в `data/study_plans.json`

**Использование памяти:**
- План добавлен в долгосрочное хранилище
- История обновлена

**Результат:**
✅ Корректная маршрутизация на `planning`
✅ План содержит задачи, ресурсы и ключевые этапы
✅ План сохранён в файл для дальнейшего использования

**Качество ответа:** 8/10
- Структура плана логичная
- Задачи разбиты по неделям
- Можно улучшить: добавить конкретные ресурсы (ссылки, книги)

---

## Эксперимент 5: Комбинированный запрос

**Запрос:**
> Объясни алгоритм Дейкстры и покажи его реализацию на Python

**Активированные агенты:**
- Router Agent → ?

**Проблема:**
⚠️ Система выбрала только один агент (theory ИЛИ coding)
⚠️ В идеале должна активировать оба агента последовательно

**Использование инструментов:**
- Зависит от выбранного агента

**Использование памяти:**
- История обновлена

**Результат:**
⚠️ Частично успешно — получен либо только объяснение, либо только код
❌ Не реализован паттерн последовательного workflow для комбинированных запросов

**Качество ответа:** 6/10
- Ответ неполный (только теория или только код)
- **Требуется улучшение архитектуры** для поддержки multi-agent collaboration

---

## Общая оценка системы

### Критерии оценки

| Критерий | Оценка | Комментарий |
|----------|--------|-------------|
| Корректность маршрутизации | 8/10 | Хорошо работает для простых запросов |
| Использование инструментов | 9/10 | Tools вызываются осмысленно |
| Работа с памятью | 7/10 | In-memory работает, но нет semantic search |
| Качество ответов | 8/10 | Ответы структурированные и полезные |
| Обработка комбинированных запросов | 5/10 | Нужна доработка для multi-agent collaboration |

### Выводы

**Что работает хорошо:**
- Классификация запросов (router agent)
- Специализированные агенты дают качественные ответы
- Tool calling работает стабильно
- Память сохраняет контекст между запросами

**Что требует улучшений:**
- Комбинированные запросы (теория + код)
- Semantic search в базе знаний
- Более сложные паттерны (supervisor, reflection)
- Валидация результатов агентов

**Рекомендации по развитию:**
1. Добавить паттерн sequential workflow для комбинированных запросов
2. Внедрить supervisor agent для контроля качества
3. Использовать vector database (ChromaDB) для базы знаний
4. Добавить reflection loop для самопроверки агентов
